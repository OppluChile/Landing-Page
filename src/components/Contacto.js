export function validarFormulario(e){const s={nombre:e.querySelector("#nombre"),email:e.querySelector("#email"),asunto:e.querySelector("#asunto")},r={nombre:e.querySelector("#feedback-nombre"),email:e.querySelector("#feedback-email"),asunto:e.querySelector("#feedback-asunto")},n={nombre:{requiredMsg:"Por favor ingrese su nombre",minLength:10},email:{requiredMsg:"Por favor ingrese un email válido"},asunto:{requiredMsg:"El asunto no puede estar vacío",minLength:10}},t='\n    <span class="feedback-icon">\n      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024">\n        <path fill="currentColor" d="M512 64a448 448 0 1 1 0 896a448 448 0 0 1 \n        0-896m-55.808 536.384l-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"/>\n      </svg>\n    </span>',o=(e,n)=>{s[e].classList.add("error-border"),s[e].classList.remove("success-border"),r[e].innerHTML=`\n    <span class="feedback-icon">\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M12.884 2.532c-.346-.654-1.422-.654-1.768 0l-9 17A1 \n        1 0 0 0 3 21h18a.998.998 0 0 0 .883-1.467zM13 18h-2v-2h2zm-2-4V9h2l.001 5z"/>\n      </svg>\n    </span><span>${n}</span>`,r[e].classList.add("error"),r[e].classList.remove("success")},a=e=>{const a=n[e],c=s[e].value.trim();if(!c)return o(e,a.requiredMsg),!1;if(a.minLength&&c.length<a.minLength)return o(e,`Debe tener al menos ${a.minLength} caracteres`),!1;if("email"===e){if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(c))return o(e,a.requiredMsg),!1}return(e=>{s[e].classList.remove("error-border"),s[e].classList.add("success-border"),r[e].innerHTML=`${t}<span>Correcto</span>`,r[e].classList.remove("error"),r[e].classList.add("success")})(e),!0};Object.keys(s).forEach((e=>{s[e].addEventListener("input",(()=>a(e))),s[e].addEventListener("blur",(()=>a(e)))})),e.addEventListener("submit",(function(n){n.preventDefault();const o=e.querySelector("#successMessage"),c=e.querySelector('button[type="submit"]');if(!o)return void console.warn("No se encontró el elemento con ID 'successMessage'");let i=!0;if(Object.keys(s).forEach((e=>{a(e)||(i=!1)})),!i)return o.innerHTML="",void o.classList.remove("form-success-message","form-error-message");c.disabled=!0;const l=c.textContent;c.textContent="Enviando...",fetch("https://api.web3forms.com/submit",{method:"POST",body:new FormData(e)}).then((e=>e.json())).then((n=>{n.success?(o.innerHTML=`${t}<span>Gracias por contactarnos</span>`,o.classList.add("form-success-message"),o.classList.remove("form-error-message"),e.reset(),Object.keys(s).forEach((e=>{s[e].classList.remove("success-border","error-border"),(e=>{r[e].innerHTML="",r[e].classList.remove("error","success")})(e)})),setTimeout((()=>{o.innerHTML="",o.classList.remove("form-success-message")}),3e3)):(o.innerHTML=`<span>Error: ${n.message}</span>`,o.classList.add("form-error-message"))})).catch((()=>{o.innerHTML="<span>Error de red. Inténtalo de nuevo.</span>",o.classList.add("form-error-message")})).finally((()=>{c.disabled=!1,c.textContent=l}))}))}